(()=>{"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.p="";var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._selector=n,this.rendererPopupImage=r}var n,r;return n=e,(r=[{key:"generateElement",value:function(){return this._element=this._getElement(),this._setEventListener(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element}},{key:"_getElement",value:function(){var e=document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0);return this._cardImage=e.querySelector(".element__image"),this._element=e,this._element}},{key:"_setEventListener",value:function(){var e=this;this._button=this._element.querySelector(".element__button"),this._trashButton=this._element.querySelector(".element__trash-icon"),this._button.addEventListener("click",(function(){e._handleLikeActive()})),this._trashButton.addEventListener("click",(function(){e._removeCardElement()})),this._cardImage.addEventListener("click",this.rendererPopupImage)}},{key:"_handleLikeActive",value:function(){this._button.classList.toggle("element__button_active")}},{key:"_removeCardElement",value:function(){this._element.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._formSelector=n.formSelector,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListener()}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListener",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._handleInputElement=t,e._toggleButtonState(),e._isValid()}))}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_isValid",value:function(){this._handleInputElement.validity.valid?this._hideInputError():this._showInputError()}},{key:"_showInputError",value:function(){this._errorElement=this._formElement.querySelector(".".concat(this._handleInputElement.id,"-error")),this._handleInputElement.classList.add(this._inputErrorClass),this._errorElement.textContent=this._handleInputElement.validationMessage,this._errorElement.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(){this._errorElement=this._formElement.querySelector(".".concat(this._handleInputElement.id,"-error")),this._handleInputElement.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._handleInputElement=t,e._hideInputError()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=t,this._popup=document.querySelector(this._selector),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_active")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_active")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListener",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_active")&&e.close(),t.target.classList.contains("single__cross")&&e.close()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e){var t,n=e.selectorPopup,r=e.callbackSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n)).callbackSubmitForm=r,t._form=t._popup.querySelector(".form"),t._inputList=t._popup.querySelectorAll(".form__input"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListener",value:function(){var e=this;s(h(a.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(){e.callbackSubmitForm(e._getInputValues()),e.close()}))}},{key:"close",value:function(){s(h(a.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function E(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).elementPopupPicture=t._popup.querySelector(".popup__picture"),t.elementPopupSignature=t._popup.querySelector(".popup__signature"),t}return t=a,(n=[{key:"open",value:function(e){this.elementPopupPicture.src=e.linkCard,this.elementPopupSignature.alt=e.nameCard,this.elementPopupSignature.textContent=e.nameCard,d(g(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._containerHtml=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._containerHtml.prepend(e)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.selectorName,r=t.selectorCareer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(n),this.userCareer=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.arrayNewCardData={name:this.userName.textContent,career:this.userCareer.textContent},this.arrayNewCardData}},{key:"setUserInfo",value:function(e){this.userName.textContent=e.firstname,this.userCareer.textContent=e.career}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headersRequest={authorization:"b34abb99-bb9c-49f0-b4ee-93cb66614104","Content-Type":"application/json"}}var t,n;return t=e,(n=[{key:"getInfromationUser",value:function(e){return this.link=e,fetch(this.link,{method:"GET",headers:this.headersRequest}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}},{key:"loadCardImages",value:function(e){return this.link=e,fetch(this.link,{method:"GET",headers:this.headersRequest}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.p,e.p,e.p,e.p,e.p,e.p;var L,I=document.querySelector(".profile__edit-button"),q=document.querySelector(".profile__add-button"),R=document.querySelector(".form__input_type_name"),B=document.querySelector(".form__input_type_career"),x=document.querySelector(".profile__name"),T=document.querySelector(".profile__career"),V=document.querySelector(".profile__avatar"),A={};L={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(L.formSelector)).forEach((function(e){var t=new o(e,L),n=e.getAttribute("name");A[n]=t,t.enableValidation()}));var N=new w(".popup_type_image");function D(e){return new n(e,".template__six-boxes",(function(){N.open(e)})).generateElement()}N.setEventListener();var U=new m({selectorPopup:".popup_type_new-card",callbackSubmitForm:function(e){cardsList.addItem(D(e))}});U.setEventListener();var F=new O({selectorName:".profile__name",selectorCareer:".profile__career"});q.addEventListener("click",(function(){A["profile-card"].resetValidation(),U.open()}));var G=new m({selectorPopup:".popup_type_edit",callbackSubmitForm:function(e){F.setUserInfo(e)}});G.setEventListener(),I.addEventListener("click",(function(){A["profile-edit"].resetValidation();var e=F.getUserInfo();R.value=e.name,B.value=e.career,G.open()}));var H=new j;H.getInfromationUser("https://mesto.nomoreparties.co/v1/cohort-43/users/me").then((function(e){x.textContent=e.name,T.textContent=e.about,V.src=e.avatar})).catch((function(e){console.log(e)})),H.loadCardImages("https://mesto.nomoreparties.co/v1/cohort-43/cards").then((function(e){console.log(e);var t=new k({data:e,renderer:function(e){t.addItem(D(e))}},".elements");t.renderItems()})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQU1LLEVBQWdCLElBQUk1QyxFQUFTLENBQ2pDQyxhQUFjLGlCQUNkQyxlQUFnQixxQkFHbEJzQixFQUFpQnJHLGlCQUFpQixTQUFTLFdBQ3pDMkcsRUFBZSxnQkFBZ0JlLGtCQUMvQkwsRUFBWUgsVUFHZCxJQUFNUyxFQUFrQixJQUFJcEUsRUFBYyxDQUN4Q1QsY0FBZSxtQkFDZlUsbUJBQW9CLFNBQUNVLEdBQ25CdUQsRUFBY0csWUFBWTFELE1BSTlCeUQsRUFBZ0JQLG1CQUVoQmhCLEVBQWtCcEcsaUJBQWlCLFNBQVMsV0FDMUMyRyxFQUFlLGdCQUFnQmUsa0JBQy9CLElBQU1HLEVBQThCSixFQUFjSyxjQUNsRHhCLEVBQWMxQyxNQUFRaUUsRUFBNEIvSSxLQUNsRHlILEVBQWdCM0MsTUFBUWlFLEVBQTRCMUMsT0FDcER3QyxFQUFnQlQsVUFHbEIsSUFBTWEsRUFBTSxJQUFJekMsRUFFaEJ5QyxFQUFJQyxtQkFBbUIsd0RBQ3BCbkMsTUFBSyxTQUFDb0MsR0FDTHpCLEVBQVkvRyxZQUFjd0ksRUFBT25KLEtBQ2pDMkgsRUFBY2hILFlBQWN3SSxFQUFPQyxNQUNuQ3hCLEVBQWNwSCxJQUFNMkksRUFBT0UsVUFFNUJDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFHZE4sRUFBSVMsZUFBZSxxREFDbEIzQyxNQUFLLFNBQUNvQyxHQUNMSyxRQUFRQyxJQUFJTixHQUNaLElBQU1WLEVBQVksSUFBSWxELEVBQVEsQ0FDNUI1RixLQUFNd0osRUFDTjFELFNBQVUsU0FBQ0wsR0FDVHFELEVBQVVDLFFBQVFQLEVBQVcvQyxNRDVKWixhQ2tLckJxRCxFQUFVa0IsaUJBRVhMLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTyIsInNvdXJjZXMiOlsid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL3BhZ2UvQXBpLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCByZW5kZXJlclBvcHVwSW1hZ2UpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLnJlbmRlcmVyUG9wdXBJbWFnZSA9IHJlbmRlcmVyUG9wdXBJbWFnZTtcbiAgfVxuXG4gIGdlbmVyYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfZ2V0RWxlbWVudCgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gY2FyZEVsZW1lbnQ7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24nKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoLWljb24nKTtcblxuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUFjdGl2ZSgpO1xuICAgIH0pXG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICAgIHRoaXMuX3JlbW92ZUNhcmRFbGVtZW50KCk7XG4gICAgfSlcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVuZGVyZXJQb3B1cEltYWdlKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQWN0aXZlKCkge1xuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19idXR0b25fYWN0aXZlJyk7XG4gIH1cblxuICBfcmVtb3ZlQ2FyZEVsZW1lbnQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgfVxuXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2lzVmFsaWQoKSB7XG4gICAgaWYoIXRoaXMuX2hhbmRsZUlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoKSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5faGFuZGxlSW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIHRoaXMuX2hhbmRsZUlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5faGFuZGxlSW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2hhbmRsZUlucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICB0aGlzLl9oYW5kbGVJbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcigpO1xuICAgIH0pXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JQb3B1cDtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfYWN0aXZlJyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpe1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaW5nbGVfX2Nyb3NzJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIH1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7c2VsZWN0b3JQb3B1cCwgY2FsbGJhY2tTdWJtaXRGb3JtfSkge1xuICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xuICAgIHRoaXMuY2FsbGJhY2tTdWJtaXRGb3JtID0gY2FsbGJhY2tTdWJtaXRGb3JtO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xuXHR9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICAgIHRoaXMuY2FsbGJhY2tTdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xuICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xuICAgIHRoaXMuZWxlbWVudFBvcHVwUGljdHVyZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGljdHVyZScpO1xuICAgIHRoaXMuZWxlbWVudFBvcHVwU2lnbmF0dXJlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zaWduYXR1cmUnKTtcblx0fVxuXG4gIG9wZW4oaXRlbSkge1xuICAgIHRoaXMuZWxlbWVudFBvcHVwUGljdHVyZS5zcmMgPSBpdGVtLmxpbmtDYXJkO1xuICAgIHRoaXMuZWxlbWVudFBvcHVwU2lnbmF0dXJlLmFsdCA9IGl0ZW0ubmFtZUNhcmQ7XG4gICAgdGhpcy5lbGVtZW50UG9wdXBTaWduYXR1cmUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWVDYXJkO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuICB9XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtkYXRhLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgIHRoaXMuX2NvbnRhaW5lckh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVySHRtbC5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtzZWxlY3Rvck5hbWUsIHNlbGVjdG9yQ2FyZWVyfSkge1xuICAgIHRoaXMudXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yTmFtZSk7XG4gICAgdGhpcy51c2VyQ2FyZWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckNhcmVlcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLmFycmF5TmV3Q2FyZERhdGEgPSB7bmFtZTogdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCwgY2FyZWVyOiB0aGlzLnVzZXJDYXJlZXIudGV4dENvbnRlbnR9O1xuICAgIHJldHVybiB0aGlzLmFycmF5TmV3Q2FyZERhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VySW5mbykge1xuICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5maXJzdG5hbWU7XG4gICAgdGhpcy51c2VyQ2FyZWVyLnRleHRDb250ZW50ID0gdXNlckluZm8uY2FyZWVyO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5oZWFkZXJzUmVxdWVzdCA9IHtcbiAgICAgIGF1dGhvcml6YXRpb246ICdiMzRhYmI5OS1iYjljLTQ5ZjAtYjRlZS05M2NiNjY2MTQxMDQnLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH07XG4gICAgfVxuXG4gICAgZ2V0SW5mcm9tYXRpb25Vc2VyKHNlcnZlcmxpbmspIHtcbiAgICAgIHRoaXMubGluayA9IHNlcnZlcmxpbms7XG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5saW5rLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1JlcXVlc3RcbiAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCS0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQvtGC0L/RgNCw0LLQutC1INC30LDQv9GA0L7RgdCwINC90LAg0YHQtdGA0LLQtdGAOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGxvYWRDYXJkSW1hZ2VzKHNlcnZlcmxpbmspIHtcbiAgICAgIHRoaXMubGluayA9IHNlcnZlcmxpbms7XG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5saW5rLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1JlcXVlc3RcbiAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCS0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQvtGC0L/RgNCw0LLQutC1INC30LDQv9GA0L7RgdCwINC90LAg0YHQtdGA0LLQtdGAOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4iLCJjb25zdCBkb21DYXJkQ29udGFpbmVyID0gJy5lbGVtZW50cyc7XG5jb25zdCBjaGFuZ2VQcm9maWxlSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yICgnLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcblxuY29uc3QgaW5wdXROYW1lRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcbmNvbnN0IGlucHV0Q2FyZWVyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX2NhcmVlcicpO1xuXG5jb25zdCBuYW1lVXNlckRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5jb25zdCBjYXJlZXJVc2VyRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2NhcmVlcicpO1xuY29uc3QgYXZhdGFyVXNlckRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuZXhwb3J0IHtkb21DYXJkQ29udGFpbmVyLCBjaGFuZ2VQcm9maWxlSWNvbiwgYWRkTmV3Q2FyZEJ1dHRvbiwgaW5wdXROYW1lRm9ybSwgaW5wdXRDYXJlZXJGb3JtLCBuYW1lVXNlckRvbSwgY2FyZWVyVXNlckRvbSwgYXZhdGFyVXNlckRvbX07XG4iLCJpbXBvcnQge0NhcmR9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuL0FwaS5qcyc7XG5cbmltcG9ydCBkYWdlc3RhbiBmcm9tICcuLi8uLi9pbWFnZXMvZWxlbWVudHNfX2ltYWdlX2RhZ2VzdGFuLmpwZyc7XG5pbXBvcnQgc29jaGkgZnJvbSAnLi4vLi4vaW1hZ2VzL2VsZW1lbnRzX19pbWFnZV9zb2NoaS5qcGcnO1xuaW1wb3J0IHVzcGVuTW9uYXN0aXIgZnJvbSAnLi4vLi4vaW1hZ2VzL2VsZW1lbnRzX19pbWFnZV91c3BlbnNraWktbW9uYXN0aXIuanBnJztcbmltcG9ydCBtb3Njb3cgZnJvbSAnLi4vLi4vaW1hZ2VzL2VsZW1lbnRzX19pbWFnZV9tb3Njb3cuanBnJztcbmltcG9ydCBzaGlyeWFldm8gZnJvbSAnLi4vLi4vaW1hZ2VzL2VsZW1lbnRzX19pbWFnZV9zaGlyeWFldm8uanBnJztcbmltcG9ydCBjaGVya2VzaXlhIGZyb20gJy4uLy4uL2ltYWdlcy9lbGVtZW50c19faW1hZ2Vfa2FyYWNoYWV2YS1jaGVya2VzaXlhLmpwZyc7XG5cbmltcG9ydCB7XG4gIGRvbUNhcmRDb250YWluZXIsXG4gIGNoYW5nZVByb2ZpbGVJY29uLFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBpbnB1dE5hbWVGb3JtLFxuICBpbnB1dENhcmVlckZvcm0sXG4gIG5hbWVVc2VyRG9tLFxuICBjYXJlZXJVc2VyRG9tLFxuICBhdmF0YXJVc2VyRG9tXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICB0aXRsZUNhcmQ6ICfQlNCw0LPQtdGB0YLQsNC9JyxcbiAgICBsaW5rQ2FyZDogZGFnZXN0YW5cbiAgfSxcbiAge1xuICAgIHRpdGxlQ2FyZDogJ9Ch0L7Rh9C4JyxcbiAgICBsaW5rQ2FyZDogc29jaGlcbiAgfSxcbiAge1xuICAgIHRpdGxlQ2FyZDogJ9Cj0YHQv9C10L3RgdC60LjQuSDQvNC+0L3QsNGB0YLRi9GA0YwnLFxuICAgIGxpbmtDYXJkOiB1c3Blbk1vbmFzdGlyXG4gIH0sXG4gIHtcbiAgICB0aXRsZUNhcmQ6ICfQnNC+0YHQutCy0LAnLFxuICAgIGxpbmtDYXJkOiBtb3Njb3dcbiAgfSxcbiAge1xuICAgIHRpdGxlQ2FyZDogJ9Ch0LDQvNCw0YDQsCcsXG4gICAgbGlua0NhcmQ6IHNoaXJ5YWV2b1xuICB9LFxuICB7XG4gICAgdGl0bGVDYXJkOiAn0JrQsNGA0LDRh9Cw0LXQstC+LdCn0LXRgNC60LXRgdC40Y8nLFxuICAgIGxpbmtDYXJkOiBjaGVya2VzaXlhXG4gIH0sXG5dO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdCcsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19zdWJtaXRfaW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZSdcbn07XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuXG4vKiBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gIH1cbn0sXG5kb21DYXJkQ29udGFpbmVyXG4pO1xuXG5jYXJkc0xpc3QucmVuZGVySXRlbXMoKTsgKi9cblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgbmV3Q2FyZENvbnRhaW5lciA9IG5ldyBDYXJkKGl0ZW0sICcudGVtcGxhdGVfX3NpeC1ib3hlcycsICgpID0+IHtcbiAgICBwb3B1cEltYWdlLm9wZW4oaXRlbSk7XG4gIH0pO1xuICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ld0NhcmRDb250YWluZXIuZ2VuZXJhdGVFbGVtZW50KCk7XG4gIHJldHVybiBuZXdDYXJkRWxlbWVudDtcbn1cblxuXG5jb25zdCBmb3JtTmV3Q2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3JQb3B1cDogJy5wb3B1cF90eXBlX25ldy1jYXJkJyxcbiAgY2FsbGJhY2tTdWJtaXRGb3JtOiAoZm9ybURhdGEpID0+IHtcbiAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGZvcm1EYXRhKSk7XG4gIH1cbn0pO1xuXG5mb3JtTmV3Q2FyZC5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmNvbnN0IGNsYXNzVXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBzZWxlY3Rvck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXG4gIHNlbGVjdG9yQ2FyZWVyOiAnLnByb2ZpbGVfX2NhcmVlcicsXG59KVxuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1sncHJvZmlsZS1jYXJkJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZvcm1OZXdDYXJkLm9wZW4oKTtcbn0pXG5cbmNvbnN0IGZvcm1Qcm9maWxlVXNlciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3JQb3B1cDogJy5wb3B1cF90eXBlX2VkaXQnLFxuICBjYWxsYmFja1N1Ym1pdEZvcm06IChpdGVtKSA9PiB7XG4gICAgY2xhc3NVc2VySW5mby5zZXRVc2VySW5mbyhpdGVtKTtcbiAgfVxufSk7XG5cbmZvcm1Qcm9maWxlVXNlci5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmNoYW5nZVByb2ZpbGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1sncHJvZmlsZS1lZGl0J10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IGRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lciA9IGNsYXNzVXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lRm9ybS52YWx1ZSA9IGRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lci5uYW1lO1xuICBpbnB1dENhcmVlckZvcm0udmFsdWUgPSBkb21Vc2VySW5mb3JtYXRpb25Db250YWluZXIuY2FyZWVyO1xuICBmb3JtUHJvZmlsZVVzZXIub3BlbigpO1xufSlcblxuY29uc3QgYXBpID0gbmV3IEFwaSgpO1xuXG5hcGkuZ2V0SW5mcm9tYXRpb25Vc2VyKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzL3VzZXJzL21lJylcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIG5hbWVVc2VyRG9tLnRleHRDb250ZW50ID0gcmVzdWx0Lm5hbWU7XG4gICAgY2FyZWVyVXNlckRvbS50ZXh0Q29udGVudCA9IHJlc3VsdC5hYm91dDtcbiAgICBhdmF0YXJVc2VyRG9tLnNyYyA9IHJlc3VsdC5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSlcblxuICBhcGkubG9hZENhcmRJbWFnZXMoJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDMvY2FyZHMnKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBkb21DYXJkQ29udGFpbmVyXG4gICAgKTtcblxuICAgIGNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwicmVuZGVyZXJQb3B1cEltYWdlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9zZWxlY3RvciIsIl9lbGVtZW50IiwiX2dldEVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjYXJkRWxlbWVudCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9idXR0b24iLCJfdHJhc2hCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VBY3RpdmUiLCJfcmVtb3ZlQ2FyZEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJjb25maWciLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJhZGQiLCJkaXNhYmxlZCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9oYW5kbGVJbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2Vycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2tTdWJtaXRGb3JtIiwiX2Zvcm0iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiZWxlbWVudFBvcHVwUGljdHVyZSIsImVsZW1lbnRQb3B1cFNpZ25hdHVyZSIsIml0ZW0iLCJsaW5rQ2FyZCIsIm5hbWVDYXJkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXJIdG1sIiwiZWxlbWVudCIsInByZXBlbmQiLCJVc2VySW5mbyIsInNlbGVjdG9yTmFtZSIsInNlbGVjdG9yQ2FyZWVyIiwidXNlck5hbWUiLCJ1c2VyQ2FyZWVyIiwiYXJyYXlOZXdDYXJkRGF0YSIsImNhcmVlciIsInVzZXJJbmZvIiwiZmlyc3RuYW1lIiwiQXBpIiwiaGVhZGVyc1JlcXVlc3QiLCJhdXRob3JpemF0aW9uIiwic2VydmVybGluayIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2hhbmdlUHJvZmlsZUljb24iLCJhZGROZXdDYXJkQnV0dG9uIiwiaW5wdXROYW1lRm9ybSIsImlucHV0Q2FyZWVyRm9ybSIsIm5hbWVVc2VyRG9tIiwiY2FyZWVyVXNlckRvbSIsImF2YXRhclVzZXJEb20iLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwSW1hZ2UiLCJjcmVhdGVDYXJkIiwib3BlbiIsImdlbmVyYXRlRWxlbWVudCIsInNldEV2ZW50TGlzdGVuZXIiLCJmb3JtTmV3Q2FyZCIsImZvcm1EYXRhIiwiY2FyZHNMaXN0IiwiYWRkSXRlbSIsImNsYXNzVXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtUHJvZmlsZVVzZXIiLCJzZXRVc2VySW5mbyIsImRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lciIsImdldFVzZXJJbmZvIiwiYXBpIiwiZ2V0SW5mcm9tYXRpb25Vc2VyIiwicmVzdWx0IiwiYWJvdXQiLCJhdmF0YXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJsb2FkQ2FyZEltYWdlcyIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==