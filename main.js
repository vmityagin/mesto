(()=>{"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.p="";var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._numberLikes=t.likes.length,this._selector=n,this.rendererPopupImage=r}var n,r;return n=e,(r=[{key:"generateElement",value:function(){return this._element=this._getElement(),this._setEventListener(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element.querySelector(".element__count").textContent=this._numberLikes,this._element}},{key:"_getElement",value:function(){var e=document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0);return this._cardImage=e.querySelector(".element__image"),this._element=e,this._element}},{key:"_setEventListener",value:function(){var e=this;this._button=this._element.querySelector(".element__button"),this._trashButton=this._element.querySelector(".element__trash-icon"),this._button.addEventListener("click",(function(){e._handleLikeActive()})),this._trashButton.addEventListener("click",(function(){e._removeCardElement()})),this._cardImage.addEventListener("click",this.rendererPopupImage)}},{key:"_handleLikeActive",value:function(){this._button.classList.toggle("element__button_active")}},{key:"_removeCardElement",value:function(){this._element.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._formSelector=n.formSelector,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListener()}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListener",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._handleInputElement=t,e._toggleButtonState(),e._isValid()}))}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_isValid",value:function(){this._handleInputElement.validity.valid?this._hideInputError():this._showInputError()}},{key:"_showInputError",value:function(){this._errorElement=this._formElement.querySelector(".".concat(this._handleInputElement.id,"-error")),this._handleInputElement.classList.add(this._inputErrorClass),this._errorElement.textContent=this._handleInputElement.validationMessage,this._errorElement.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(){this._errorElement=this._formElement.querySelector(".".concat(this._handleInputElement.id,"-error")),this._handleInputElement.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._handleInputElement=t,e._hideInputError()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=t,this._popup=document.querySelector(this._selector),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_active")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_active")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListener",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_active")&&e.close(),t.target.classList.contains("single__cross")&&e.close()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e){var t,n=e.selectorPopup,r=e.callbackSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n)).callbackSubmitForm=r,t._form=t._popup.querySelector(".form"),t._inputList=t._popup.querySelectorAll(".form__input"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListener",value:function(){var e=this;c(h(a.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(){e.callbackSubmitForm(e._getInputValues()),e.close()}))}},{key:"close",value:function(){c(h(a.prototype),"close",this).call(this),this._form.reset()}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function E(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).elementPopupPicture=t._popup.querySelector(".popup__picture"),t.elementPopupSignature=t._popup.querySelector(".popup__signature"),t}return t=a,(n=[{key:"open",value:function(e){this.elementPopupPicture.src=e.link,this.elementPopupSignature.alt=e.name,this.elementPopupSignature.textContent=e.name,d(g(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._containerHtml=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._containerHtml.prepend(e)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.selectorName,r=t.selectorCareer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(n),this.userCareer=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.arrayNewCardData={name:this.userName.textContent,career:this.userCareer.textContent},this.arrayNewCardData}},{key:"setUserInfo",value:function(e){this.userName.textContent=e.firstname,this.userCareer.textContent=e.career}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headersRequest={authorization:"b34abb99-bb9c-49f0-b4ee-93cb66614104","Content-Type":"application/json"}}var t,n;return t=e,(n=[{key:"getInfromationUser",value:function(e){return this.link=e,fetch(this.link,{method:"GET",headers:this.headersRequest}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}},{key:"loadCardImages",value:function(e){return this.link=e,fetch(this.link,{method:"GET",headers:this.headersRequest}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}},{key:"changeProfile",value:function(e,t){return this.link=e,fetch(this.link,{method:"PATCH",headers:this.headersRequest,body:JSON.stringify({name:"".concat(t.firstname),about:"".concat(t.career)})}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return this.link=e,fetch(this.link,{method:"POST",headers:this.headersRequest,body:JSON.stringify({name:t.name,link:t.link})}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка при отправке запроса на сервер: ".concat(e.status))}))}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.p,e.p,e.p,e.p,e.p,e.p;var L,I=".elements",q=document.querySelector(".profile__edit-button"),R=document.querySelector(".profile__add-button"),B=document.querySelector(".form__input_type_name"),x=document.querySelector(".form__input_type_career"),T=document.querySelector(".profile__name"),N=document.querySelector(".profile__career"),V=document.querySelector(".profile__avatar"),A={};L={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(L.formSelector)).forEach((function(e){var t=new o(e,L),n=e.getAttribute("name");A[n]=t,t.enableValidation()}));var D=new k(".popup_type_image");function F(e){return new n(e,".template__six-boxes",(function(){D.open(e)})).generateElement()}D.setEventListener();var U=new m({selectorPopup:".popup_type_new-card",callbackSubmitForm:function(e){var t;new S({data:e,renderer:function(e){cardsList.addItem(F(e))}},I).addItem(F(e)),t=e,J.addNewCard("https://mesto.nomoreparties.co/v1/cohort-43/cards",t)}});U.setEventListener();var H=new P({selectorName:".profile__name",selectorCareer:".profile__career"});R.addEventListener("click",(function(){A["profile-card"].resetValidation(),U.open()}));var G=new m({selectorPopup:".popup_type_edit",callbackSubmitForm:function(e){J.changeProfile("https://mesto.nomoreparties.co/v1/cohort-43/users/me",e).then((function(){z()})).catch((function(e){console.log(e)}))}});G.setEventListener(),q.addEventListener("click",(function(){A["profile-edit"].resetValidation();var e=H.getUserInfo();B.value=e.name,x.value=e.career,G.open()}));var J=new j;function z(){J.getInfromationUser("https://mesto.nomoreparties.co/v1/cohort-43/users/me").then((function(e){T.textContent=e.name,N.textContent=e.about,V.src=e.avatar})).catch((function(e){console.log(e)}))}z(),J.loadCardImages("https://mesto.nomoreparties.co/v1/cohort-43/cards").then((function(e){console.log(e);var t=new S({data:e,renderer:function(e){t.addItem(F(e))}},I);t.renderItems()})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNmVSxtQkFBb0IsU0FBQ1UsR0FFbkI0RCxFQUFJSyxjQUFjLHVEQUF3RGpFLEdBQ3pFeUIsTUFBSyxXQUNKeUMsT0FFREMsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixTQU1sQkosRUFBZ0JWLG1CQUVoQmhCLEVBQWtCeEcsaUJBQWlCLFNBQVMsV0FDMUMrRyxFQUFlLGdCQUFnQmtCLGtCQUMvQixJQUFNUSxFQUE4QlQsRUFBY1UsY0FDbERoQyxFQUFjOUMsTUFBUTZFLEVBQTRCOUosS0FDbERnSSxFQUFnQi9DLE1BQVE2RSxFQUE0QnhELE9BQ3BEaUQsRUFBZ0JaLFVBR2xCLElBQU1RLEVBQU0sSUFBSTFDLEVBRWhCLFNBQVNnRCxJQUNQTixFQUFJYSxtQkFBbUIsd0RBQ3BCaEQsTUFBSyxTQUFDaUQsR0FDTGhDLEVBQVluSCxZQUFjbUosRUFBT2pLLEtBQ2pDa0ksRUFBY3BILFlBQWNtSixFQUFPdEMsTUFDbkNRLEVBQWN4SCxJQUFNc0osRUFBT0MsVUFFNUJSLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFJbEJGLElBRUFOLEVBQUlnQixlQUFlLHFEQUNsQm5ELE1BQUssU0FBQ2lELEdBQ05MLFFBQVFDLElBQUlJLEdBQ1osSUFBTWhCLEVBQVksSUFBSXpELEVBQVEsQ0FDN0I3RixLQUFNc0ssRUFDTnZFLFNBQVUsU0FBQ0gsR0FDVDBELEVBQVVDLFFBQVFSLEVBQVduRCxNQUdqQ3FDLEdBRUFxQixFQUFVbUIsaUJBRVRWLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTyIsInNvdXJjZXMiOlsid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL3BhZ2UvQXBpLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCByZW5kZXJlclBvcHVwSW1hZ2UpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbnVtYmVyTGlrZXMgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMucmVuZGVyZXJQb3B1cEltYWdlID0gcmVuZGVyZXJQb3B1cEltYWdlO1xuICB9XG5cbiAgZ2VuZXJhdGVFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fY291bnQnKS50ZXh0Q29udGVudCA9IHRoaXMuX251bWJlckxpa2VzO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgIC5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5fZWxlbWVudCA9IGNhcmRFbGVtZW50O1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaC1pY29uJyk7XG5cbiAgICB0aGlzLl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VBY3RpdmUoKTtcbiAgICB9KVxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgICB0aGlzLl9yZW1vdmVDYXJkRWxlbWVudCgpO1xuICAgIH0pXG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnJlbmRlcmVyUG9wdXBJbWFnZSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUFjdGl2ZSgpIHtcbiAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fYnV0dG9uX2FjdGl2ZScpO1xuICB9XG5cbiAgX3JlbW92ZUNhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxufVxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgY29uZmlnKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gIH1cblxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5faXNWYWxpZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9pc1ZhbGlkKCkge1xuICAgIGlmKCF0aGlzLl9oYW5kbGVJbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2hhbmRsZUlucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICB0aGlzLl9oYW5kbGVJbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2hhbmRsZUlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcigpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9oYW5kbGVJbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgdGhpcy5faGFuZGxlSW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoKTtcbiAgICB9KVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yUG9wdXA7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfYWN0aXZlJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmKGV2dC5rZXkgPT09ICdFc2NhcGUnKXtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcblxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9hY3RpdmUnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlX19jcm9zcycpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICB9XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe3NlbGVjdG9yUG9wdXAsIGNhbGxiYWNrU3VibWl0Rm9ybX0pIHtcbiAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcbiAgICB0aGlzLmNhbGxiYWNrU3VibWl0Rm9ybSA9IGNhbGxiYWNrU3VibWl0Rm9ybTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcblx0fVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVyKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmNhbGxiYWNrU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcbiAgICB0aGlzLmVsZW1lbnRQb3B1cFBpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3BpY3R1cmUnKTtcbiAgICB0aGlzLmVsZW1lbnRQb3B1cFNpZ25hdHVyZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2lnbmF0dXJlJyk7XG5cdH1cblxuICBvcGVuKGl0ZW0pIHtcbiAgICB0aGlzLmVsZW1lbnRQb3B1cFBpY3R1cmUuc3JjID0gaXRlbS5saW5rO1xuICAgIHRoaXMuZWxlbWVudFBvcHVwU2lnbmF0dXJlLmFsdCA9IGl0ZW0ubmFtZTtcbiAgICB0aGlzLmVsZW1lbnRQb3B1cFNpZ25hdHVyZS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbiAgfVxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7ZGF0YSwgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICB0aGlzLl9jb250YWluZXJIdG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSlcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lckh0bWwucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7c2VsZWN0b3JOYW1lLCBzZWxlY3RvckNhcmVlcn0pIHtcbiAgICB0aGlzLnVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMudXNlckNhcmVlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JDYXJlZXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5hcnJheU5ld0NhcmREYXRhID0ge25hbWU6IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQsIGNhcmVlcjogdGhpcy51c2VyQ2FyZWVyLnRleHRDb250ZW50fTtcbiAgICByZXR1cm4gdGhpcy5hcnJheU5ld0NhcmREYXRhO1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckluZm8pIHtcbiAgICB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8uZmlyc3RuYW1lO1xuICAgIHRoaXMudXNlckNhcmVlci50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmNhcmVlcjtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaGVhZGVyc1JlcXVlc3QgPSB7XG4gICAgICBhdXRob3JpemF0aW9uOiAnYjM0YWJiOTktYmI5Yy00OWYwLWI0ZWUtOTNjYjY2NjE0MTA0JyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9O1xuICAgIH1cblxuICAgIGdldEluZnJvbWF0aW9uVXNlcihzZXJ2ZXJsaW5rKSB7XG4gICAgICB0aGlzLmxpbmsgPSBzZXJ2ZXJsaW5rO1xuICAgICAgcmV0dXJuIGZldGNoKHRoaXMubGluaywge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNSZXF1ZXN0XG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCDQv9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGB0LXRgNCy0LXRgDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBsb2FkQ2FyZEltYWdlcyhzZXJ2ZXJsaW5rKSB7XG4gICAgICB0aGlzLmxpbmsgPSBzZXJ2ZXJsaW5rO1xuICAgICAgcmV0dXJuIGZldGNoKHRoaXMubGluaywge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNSZXF1ZXN0XG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCDQv9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGB0LXRgNCy0LXRgDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBjaGFuZ2VQcm9maWxlKHNlcnZlcmxpbmssIGFycmF5KSB7XG4gICAgICB0aGlzLmxpbmsgPSBzZXJ2ZXJsaW5rO1xuICAgICAgcmV0dXJuIGZldGNoKHRoaXMubGluaywge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1JlcXVlc3QsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lIDogYCR7YXJyYXkuZmlyc3RuYW1lfWAsXG4gICAgICAgICAgYWJvdXQgOiBgJHthcnJheS5jYXJlZXJ9YFxuICAgICAgICB9KVxuICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INC+0YLQv9GA0LDQstC60LUg0LfQsNC/0YDQvtGB0LAg0L3QsCDRgdC10YDQstC10YA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkTmV3Q2FyZChzZXJ2ZXJsaW5rLCBhcnJheSkge1xuICAgICAgdGhpcy5saW5rID0gc2VydmVybGluaztcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLmxpbmssIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1JlcXVlc3QsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lIDogYXJyYXkubmFtZSxcbiAgICAgICAgICBsaW5rIDogYXJyYXkubGlua1xuICAgICAgICB9KVxuICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INC+0YLQv9GA0LDQstC60LUg0LfQsNC/0YDQvtGB0LAg0L3QsCDRgdC10YDQstC10YA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiIsImNvbnN0IGRvbUNhcmRDb250YWluZXIgPSAnLmVsZW1lbnRzJztcbmNvbnN0IGNoYW5nZVByb2ZpbGVJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuXG5jb25zdCBpbnB1dE5hbWVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfbmFtZScpO1xuY29uc3QgaW5wdXRDYXJlZXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfY2FyZWVyJyk7XG5cbmNvbnN0IG5hbWVVc2VyRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmNvbnN0IGNhcmVlclVzZXJEb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fY2FyZWVyJyk7XG5jb25zdCBhdmF0YXJVc2VyRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuXG5leHBvcnQge2RvbUNhcmRDb250YWluZXIsIGNoYW5nZVByb2ZpbGVJY29uLCBhZGROZXdDYXJkQnV0dG9uLCBpbnB1dE5hbWVGb3JtLCBpbnB1dENhcmVlckZvcm0sIG5hbWVVc2VyRG9tLCBjYXJlZXJVc2VyRG9tLCBhdmF0YXJVc2VyRG9tfTtcbiIsImltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4vQXBpLmpzJztcblxuaW1wb3J0IGRhZ2VzdGFuIGZyb20gJy4uLy4uL2ltYWdlcy9lbGVtZW50c19faW1hZ2VfZGFnZXN0YW4uanBnJztcbmltcG9ydCBzb2NoaSBmcm9tICcuLi8uLi9pbWFnZXMvZWxlbWVudHNfX2ltYWdlX3NvY2hpLmpwZyc7XG5pbXBvcnQgdXNwZW5Nb25hc3RpciBmcm9tICcuLi8uLi9pbWFnZXMvZWxlbWVudHNfX2ltYWdlX3VzcGVuc2tpaS1tb25hc3Rpci5qcGcnO1xuaW1wb3J0IG1vc2NvdyBmcm9tICcuLi8uLi9pbWFnZXMvZWxlbWVudHNfX2ltYWdlX21vc2Nvdy5qcGcnO1xuaW1wb3J0IHNoaXJ5YWV2byBmcm9tICcuLi8uLi9pbWFnZXMvZWxlbWVudHNfX2ltYWdlX3NoaXJ5YWV2by5qcGcnO1xuaW1wb3J0IGNoZXJrZXNpeWEgZnJvbSAnLi4vLi4vaW1hZ2VzL2VsZW1lbnRzX19pbWFnZV9rYXJhY2hhZXZhLWNoZXJrZXNpeWEuanBnJztcblxuaW1wb3J0IHtcbiAgZG9tQ2FyZENvbnRhaW5lcixcbiAgY2hhbmdlUHJvZmlsZUljb24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIGlucHV0TmFtZUZvcm0sXG4gIGlucHV0Q2FyZWVyRm9ybSxcbiAgbmFtZVVzZXJEb20sXG4gIGNhcmVlclVzZXJEb20sXG4gIGF2YXRhclVzZXJEb21cbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHRpdGxlQ2FyZDogJ9CU0LDQs9C10YHRgtCw0L0nLFxuICAgIGxpbmtDYXJkOiBkYWdlc3RhblxuICB9LFxuICB7XG4gICAgdGl0bGVDYXJkOiAn0KHQvtGH0LgnLFxuICAgIGxpbmtDYXJkOiBzb2NoaVxuICB9LFxuICB7XG4gICAgdGl0bGVDYXJkOiAn0KPRgdC/0LXQvdGB0LrQuNC5INC80L7QvdCw0YHRgtGL0YDRjCcsXG4gICAgbGlua0NhcmQ6IHVzcGVuTW9uYXN0aXJcbiAgfSxcbiAge1xuICAgIHRpdGxlQ2FyZDogJ9Cc0L7RgdC60LLQsCcsXG4gICAgbGlua0NhcmQ6IG1vc2Nvd1xuICB9LFxuICB7XG4gICAgdGl0bGVDYXJkOiAn0KHQsNC80LDRgNCwJyxcbiAgICBsaW5rQ2FyZDogc2hpcnlhZXZvXG4gIH0sXG4gIHtcbiAgICB0aXRsZUNhcmQ6ICfQmtCw0YDQsNGH0LDQtdCy0L4t0KfQtdGA0LrQtdGB0LjRjycsXG4gICAgbGlua0NhcmQ6IGNoZXJrZXNpeWFcbiAgfSxcbl07XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0JyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdF9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJ1xufTtcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG5cbi8qIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgZGF0YTogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgfVxufSxcbmRvbUNhcmRDb250YWluZXJcbik7XG5cbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpOyAqL1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9pbWFnZScpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBuZXdDYXJkQ29udGFpbmVyID0gbmV3IENhcmQoaXRlbSwgJy50ZW1wbGF0ZV9fc2l4LWJveGVzJywgKCkgPT4ge1xuICAgIHBvcHVwSW1hZ2Uub3BlbihpdGVtKTtcbiAgfSk7XG4gIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gbmV3Q2FyZENvbnRhaW5lci5nZW5lcmF0ZUVsZW1lbnQoKTtcbiAgcmV0dXJuIG5ld0NhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBhZGROZXdDYXJkSGFuZGxlcihhcnJheUNhcmREYXRhKSB7XG4gIGFwaS5hZGROZXdDYXJkKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzL2NhcmRzJywgYXJyYXlDYXJkRGF0YSk7XG59XG5cbmNvbnN0IGZvcm1OZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBzZWxlY3RvclBvcHVwOiAnLnBvcHVwX3R5cGVfbmV3LWNhcmQnLFxuICBjYWxsYmFja1N1Ym1pdEZvcm06IChmb3JtRGF0YSkgPT4ge1xuICAgICBjb25zdCBjcmVhdGVDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZG9tQ2FyZENvbnRhaW5lclxuICAgICk7XG4gICAgY3JlYXRlQ2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGZvcm1EYXRhKSk7XG4gICAgYWRkTmV3Q2FyZEhhbmRsZXIoZm9ybURhdGEpO1xuICB9XG59KTtcblxuZm9ybU5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG5jb25zdCBjbGFzc1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgc2VsZWN0b3JOYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxuICBzZWxlY3RvckNhcmVlcjogJy5wcm9maWxlX19jYXJlZXInLFxufSlcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbJ3Byb2ZpbGUtY2FyZCddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBmb3JtTmV3Q2FyZC5vcGVuKCk7XG59KVxuXG5jb25zdCBmb3JtUHJvZmlsZVVzZXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHNlbGVjdG9yUG9wdXA6ICcucG9wdXBfdHlwZV9lZGl0JyxcbiAgY2FsbGJhY2tTdWJtaXRGb3JtOiAoaXRlbSkgPT4ge1xuICAgIC8qIGNsYXNzVXNlckluZm8uc2V0VXNlckluZm8oaXRlbSk7ICovXG4gICAgYXBpLmNoYW5nZVByb2ZpbGUoJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDMvdXNlcnMvbWUnLCBpdGVtKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNoYW5nZVVzZXJJbmZvRnJvbVNlcnZlcigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG5cbiAgfVxufSk7XG5cbmZvcm1Qcm9maWxlVXNlci5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmNoYW5nZVByb2ZpbGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1sncHJvZmlsZS1lZGl0J10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IGRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lciA9IGNsYXNzVXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lRm9ybS52YWx1ZSA9IGRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lci5uYW1lO1xuICBpbnB1dENhcmVlckZvcm0udmFsdWUgPSBkb21Vc2VySW5mb3JtYXRpb25Db250YWluZXIuY2FyZWVyO1xuICBmb3JtUHJvZmlsZVVzZXIub3BlbigpO1xufSlcblxuY29uc3QgYXBpID0gbmV3IEFwaSgpO1xuXG5mdW5jdGlvbiBjaGFuZ2VVc2VySW5mb0Zyb21TZXJ2ZXIoKSB7XG4gIGFwaS5nZXRJbmZyb21hdGlvblVzZXIoJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDMvdXNlcnMvbWUnKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIG5hbWVVc2VyRG9tLnRleHRDb250ZW50ID0gcmVzdWx0Lm5hbWU7XG4gICAgICBjYXJlZXJVc2VyRG9tLnRleHRDb250ZW50ID0gcmVzdWx0LmFib3V0O1xuICAgICAgYXZhdGFyVXNlckRvbS5zcmMgPSByZXN1bHQuYXZhdGFyO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbn1cblxuY2hhbmdlVXNlckluZm9Gcm9tU2VydmVyKCk7XG5cbmFwaS5sb2FkQ2FyZEltYWdlcygnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00My9jYXJkcycpXG4udGhlbigocmVzdWx0KSA9PiB7XG4gY29uc29sZS5sb2cocmVzdWx0KTtcbiBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGRhdGE6IHJlc3VsdCxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gIH1cbn0sXG5kb21DYXJkQ29udGFpbmVyXG4pO1xuY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG59KVxuLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn0pXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwicmVuZGVyZXJQb3B1cEltYWdlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9udW1iZXJMaWtlcyIsImxpa2VzIiwibGVuZ3RoIiwiX3NlbGVjdG9yIiwiX2VsZW1lbnQiLCJfZ2V0RWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVyIiwiX2NhcmRJbWFnZSIsInNyYyIsImFsdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvbiIsIl90cmFzaEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUFjdGl2ZSIsIl9yZW1vdmVDYXJkRWxlbWVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsImFkZCIsImRpc2FibGVkIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hhbmRsZUlucHV0RWxlbWVudCIsIl9pc1ZhbGlkIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIlBvcHVwIiwic2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja1N1Ym1pdEZvcm0iLCJfZm9ybSIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJlbGVtZW50UG9wdXBQaWN0dXJlIiwiZWxlbWVudFBvcHVwU2lnbmF0dXJlIiwiaXRlbSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVySHRtbCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJzZWxlY3Rvck5hbWUiLCJzZWxlY3RvckNhcmVlciIsInVzZXJOYW1lIiwidXNlckNhcmVlciIsImFycmF5TmV3Q2FyZERhdGEiLCJjYXJlZXIiLCJ1c2VySW5mbyIsImZpcnN0bmFtZSIsIkFwaSIsImhlYWRlcnNSZXF1ZXN0IiwiYXV0aG9yaXphdGlvbiIsInNlcnZlcmxpbmsiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImFycmF5IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImRvbUNhcmRDb250YWluZXIiLCJjaGFuZ2VQcm9maWxlSWNvbiIsImFkZE5ld0NhcmRCdXR0b24iLCJpbnB1dE5hbWVGb3JtIiwiaW5wdXRDYXJlZXJGb3JtIiwibmFtZVVzZXJEb20iLCJjYXJlZXJVc2VyRG9tIiwiYXZhdGFyVXNlckRvbSIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBJbWFnZSIsImNyZWF0ZUNhcmQiLCJvcGVuIiwiZ2VuZXJhdGVFbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lciIsImZvcm1OZXdDYXJkIiwiZm9ybURhdGEiLCJhcnJheUNhcmREYXRhIiwiY2FyZHNMaXN0IiwiYWRkSXRlbSIsImFwaSIsImFkZE5ld0NhcmQiLCJjbGFzc1VzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9ybVByb2ZpbGVVc2VyIiwiY2hhbmdlUHJvZmlsZSIsImNoYW5nZVVzZXJJbmZvRnJvbVNlcnZlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImRvbVVzZXJJbmZvcm1hdGlvbkNvbnRhaW5lciIsImdldFVzZXJJbmZvIiwiZ2V0SW5mcm9tYXRpb25Vc2VyIiwicmVzdWx0IiwiYXZhdGFyIiwibG9hZENhcmRJbWFnZXMiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=